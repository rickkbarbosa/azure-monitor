zabbix_export:
  version: '5.4'
  date: '2021-08-23T22:36:53Z'
  groups:
    -
      uuid: f2481361f99448eea617b7b1d4765566
      name: 'Discovered hosts'
    -
      uuid: 7df96b18c230490a9a0a9e2307226338
      name: Templates
    -
      uuid: 966c754e797845739bd48c15217e0105
      name: Templates/Azure
  templates:
    -
      uuid: c9bcb62a68204abaadb3b57f087f8120
      template: 'Template - Azure - Itens discovery'
      name: 'Template - Azure - Itens discovery'
      description: 'Template to find all Virtual Machines on Azure'
      groups:
        -
          name: Templates
        -
          name: Templates/Azure
      discovery_rules:
        -
          uuid: ed971eec2bb84e36b51d020e9b04640d
          name: 'Azure VPN Gateway discovery'
          type: EXTERNAL
          key: 'az_discovery.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}","--connections"]'
          delay: 1d
          item_prototypes:
            -
              uuid: f8c341ba419d4a7c98b2d1896db450b8
              name: 'Azure Vpn Connection Status [ {#AZ_CONNECTION_NAME} ]'
              type: EXTERNAL
              key: 'azure_monitor_vpn.sh["-c","{$AZURE_TENANT_ID}:{$AZURE_APP_ID}:{$AZURE_APP_PASSWORD}:{#AZ_CONNECTION_RESOURCEGROUP}","-s","{#AZ_CONNECTION_NAME}"]'
              history: 7d
              preprocessing:
                -
                  type: REGEX
                  parameters:
                    - ^Connected
                    - '1'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
              tags:
                -
                  tag: Application
                  value: 'Azure Connection'
            -
              uuid: f60d4bd8650c48f7a8adb2d5c971a525
              name: 'AZ Connection - Bits In/sec [ {#AZ_CONNECTION_NAME} ]'
              type: EXTERNAL
              key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{#AZ_CONNECTION_NAME},{$AZURE_RESOURCE_GROUP},CONNECTION,BitsInPerSecond,average"]'
              delay: 5m
              history: 7d
              units: bps
              tags:
                -
                  tag: Application
                  value: 'Azure Connection'
            -
              uuid: 3be0256cdab24a97a05be7cc6974efe8
              name: 'AZ Connection - Bits Out/sec [ {#AZ_CONNECTION_NAME} ]'
              type: EXTERNAL
              key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{#AZ_CONNECTION_NAME},{$AZURE_RESOURCE_GROUP},CONNECTION,BitsOutPerSecond,average"]'
              delay: 5m
              history: 7d
              units: bps
              tags:
                -
                  tag: Application
                  value: 'Azure Connection'
        -
          uuid: 4d1d9ab3e1794efcaae0cccad63e0756
          name: 'Azure DataFactory discovery'
          type: EXTERNAL
          key: 'az_discovery.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}","-G","{$AZURE_CLIENTNAME}","--datafactory"]'
          delay: 1d
          host_prototypes:
            -
              uuid: 7339eee74ea74a06ba5e64641fdb2a7c
              host: '{#AZ_ADF_NAME}'
              name: '{#AZ_ADF_NAME}'
              group_links:
                -
                  group:
                    name: 'Discovered hosts'
              group_prototypes:
                -
                  name: '{#AZ_ADF_GROUPNAME}'
              templates:
                -
                  name: 'Template - Azure DataFactory'
              macros:
                -
                  macro: '{$AZURE_RESOURCE_GROUP}'
                  value: '{#AZ_ADF_RESOURCEGROUP}'
        -
          uuid: 96435facc0aa4fd186dab423b5d62fa2
          name: 'Azure Database Instances discovery'
          type: EXTERNAL
          key: 'az_discovery.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}","-G","{$AZURE_CLIENTNAME}","--sql"]'
          delay: 1d
          description: 'Discovers Database Servers (SQL Instances) on Azure'
          host_prototypes:
            -
              uuid: 8c2596abc39f42a8a8c0b61c94eea634
              host: '{#AZ_DBSERVER_NAME}'
              name: '{#AZ_DBSERVER_NAME}'
              group_links:
                -
                  group:
                    name: 'Discovered hosts'
              group_prototypes:
                -
                  name: '{#AZ_DBSERVER_GROUPNAME}'
              templates:
                -
                  name: 'Template - Azure Databases'
              macros:
                -
                  macro: '{$AZURE_RESOURCE_GROUP}'
                  value: '{#AZ_DBSERVER_RESOURCEGROUP}'
        -
          uuid: cafeb89be05c43709cb5483a9b073a63
          name: 'Azure Virtual Machine discovery'
          type: EXTERNAL
          key: 'az_discovery.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}","-G","{$AZURE_CLIENTNAME}","--virtualmachine"]'
          delay: 1d
          host_prototypes:
            -
              uuid: af2363cf52ad4b3c9fc5843e19f94f06
              host: '{#AZ_VM_NAME}'
              name: '{#AZ_VM_NAME}'
              group_links:
                -
                  group:
                    name: 'Discovered hosts'
              group_prototypes:
                -
                  name: '{#AZ_VM_GROUPNAME}'
              templates:
                -
                  name: 'Template - Azure VM'
              macros:
                -
                  macro: '{$AZURE_RESOURCE_GROUP}'
                  value: '{#AZ_VM_RESOURCEGROUP}'
        -
          uuid: 03443a2e57ca41169dc0b7744ebbeb3e
          name: 'Azure WebApp discovery'
          type: EXTERNAL
          key: 'az_discovery.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}","-G","{$AZURE_CLIENTNAME}","--webapp"]'
          delay: 1d
          host_prototypes:
            -
              uuid: 8770275eaa6d41f1b882109917b7418e
              host: '{#AZ_WEBAPP_NAME}'
              name: '{#AZ_WEBAPP_NAME}'
              group_links:
                -
                  group:
                    name: 'Discovered hosts'
              group_prototypes:
                -
                  name: '{#AZ_WEBAPP_GROUPNAME}'
              templates:
                -
                  name: 'Template - Azure App Services'
              macros:
                -
                  macro: '{$AZURE_RESOURCE_GROUP}'
                  value: '{#AZ_WEBAPP_RESOURCEGROUP}'
      macros:
        -
          macro: '{$AZURE_CLIENTNAME}'
          value: ClientName
          description: 'Client Name. Discover purposes'
    -
      uuid: 3cf597a0794d42ef8997bf933cd51b63
      template: 'Template - Azure AKS'
      name: 'Template - Azure AKS'
      description: 'Azure Kubernetes Service Template'
      groups:
        -
          name: Templates
        -
          name: Templates/Azure
      items:
        -
          uuid: e58913d7eaf740e69216b03d19a8451e
          name: 'AKS Number of pods in Ready state'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},AKS,kube_pod_status_ready,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'Number of pods in Ready state'
          tags:
            -
              tag: Application
              value: 'Azure Kubernetes Services'
        -
          uuid: 46dba337cc1145bbaff7646dc3476cd3
          name: 'AKS CPU Usage by Nodes (%)'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},AKS,node_cpu_usage_percentage,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported'
          tags:
            -
              tag: Application
              value: 'Azure Kubernetes Services'
        -
          uuid: 693c2bc877f94c2ea66db472e2fda3d4
          name: 'AKS Disk Usage (bytes)'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},AKS,node_disk_usage_bytes,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: b
          description: |
            Disk Usage by cluster (mean, nodes)
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure Kubernetes Services'
        -
          uuid: 0a9ea64e8f464be79163e5cbca1389de
          name: 'AKS Disk Usage by Nodes (%)'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},AKS,node_disk_usage_percentage,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: '%'
          description: |
            Disk Usage (%) by cluster (mean, nodes)
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure Kubernetes Services'
        -
          uuid: d7a9d41c49dc4181ba84c683b339aef5
          name: 'AKS Memory Usage by Nodes (%)'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},AKS,node_memory_rss_percentage,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: '%'
          description: |
            Memory Usage (%) (mean, nodes)
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure Kubernetes Services'
        -
          uuid: 971fb22cf04a4aaab78fc0d9734870fb
          name: 'AKS Network In'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},AKS,node_network_in_bytes,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: bps
          description: |
            AKS Cluster Network In bytes
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure Kubernetes Services'
        -
          uuid: bc51cd6db5ca4750ac298a4a9eadb268
          name: 'AKS Network Out'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},AKS,node_network_out_bytes,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: bps
          description: |
            AKS Cluster Network out bytes
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure Kubernetes Services'
      macros:
        -
          macro: '{$AZURE_RESOURCE_GROUP}'
        -
          macro: '{$REGION}'
    -
      uuid: eced389c0a294a8ea87f8bd2962ef9d5
      template: 'Template - Azure API Management'
      name: 'Template - Azure API Management'
      description: 'Azure API Management Template'
      groups:
        -
          name: Templates
        -
          name: Templates/Azure
      items:
        -
          uuid: 86a52c20a73445c19df73aea90ca087f
          name: 'APIM Duration of Backend Requests'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},APIM,BackendDuration,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: ms
          description: 'Duration of Backend Requests'
          tags:
            -
              tag: Application
              value: 'Azure API Management'
        -
          uuid: 7c687d2336d14ab285f35ac4b795500b
          name: 'APIM Capacity'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},APIM,Capacity,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: '%'
          description: |
            Capacity consumption on API Management, in percentile.
            
            https://docs.microsoft.com/pt-br/azure/api-management/api-management-capacity
          tags:
            -
              tag: Application
              value: 'Azure API Management'
        -
          uuid: 751c5479a4464223a0f9b0b063e60c88
          name: 'APIM Duration of Requests'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},APIM,Duration,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: ms
          description: 'Overall Duration of Gateway Requests'
          tags:
            -
              tag: Application
              value: 'Azure API Management'
        -
          uuid: d2eae22ce0bc44e2bd9ce0db89284d5d
          name: 'APIM EventHub Events (Sucessfull)'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},APIM,EventHubSuccessfulEvents,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'Number of EventHub Events'
          tags:
            -
              tag: Application
              value: 'Azure API Management'
        -
          uuid: 871b74d089b34158b5dab4dc589bc4d3
          name: 'APIM EventHub Events (Size)'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},APIM,EventHubTotalBytesSent,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: b
          description: 'Total bytes sent to EventHub'
          tags:
            -
              tag: Application
              value: 'Azure API Management'
        -
          uuid: 1030c8822d79408d9192c7c75106dee0
          name: 'APIM EventHub Events (Failed)'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},APIM,EventHubTotalFailedEvents,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'Failed EventHub Events'
          tags:
            -
              tag: Application
              value: 'Azure API Management'
        -
          uuid: aac97ed7dd5f427cb45ecfc63f73fa7c
          name: 'APIM Number of Requests'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},APIM,Requests,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'Number of requests on API Management'
          tags:
            -
              tag: Application
              value: 'Azure API Management'
      macros:
        -
          macro: '{$AZURE_RESOURCE_GROUP}'
        -
          macro: '{$REGION}'
    -
      uuid: d37b79deee604496b8e4819960cdc1fb
      template: 'Template - Azure App Services'
      name: 'Template - Azure App Services'
      description: 'Azure WebApp monitoring'
      groups:
        -
          name: Templates
        -
          name: Templates/Azure
      items:
        -
          uuid: 8ba4277eab8044d5ad5f78594688113b
          name: 'WebApp HTTP 2xx'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},WEB,Http2xx,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'Number of requests on APP service'
          tags:
            -
              tag: Application
              value: 'Azure App Services'
        -
          uuid: 726d96e6cea84f428585c68c28b26809
          name: 'WebApp HTTP 4xx'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},WEB,Http4xx,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'Number of requests on APP service'
          tags:
            -
              tag: Application
              value: 'Azure App Services'
        -
          uuid: 9445c54199ad4c8aa3e9c7c2c59a4766
          name: 'WebApp HTTP 401'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},WEB,Http401,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'Number of requests on APP service'
          tags:
            -
              tag: Application
              value: 'Azure App Services'
        -
          uuid: 9fb16375f8be4a33856fe14699db6095
          name: 'WebApp HTTP 403'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},WEB,Http403,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'Number of requests on APP service'
          tags:
            -
              tag: Application
              value: 'Azure App Services'
        -
          uuid: bc233d8aedfa4924a76faa9e0372a3b1
          name: 'WebApp HTTP 404'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},WEB,Http404,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'Number of requests on APP service'
          tags:
            -
              tag: Application
              value: 'Azure App Services'
        -
          uuid: 8ab618605fee4bf5b4e4b9a079481243
          name: 'WebApp Requests'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},WEB,Requests,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: 'Number of requests on APP service'
          tags:
            -
              tag: Application
              value: 'Azure App Services'
      macros:
        -
          macro: '{$AZURE_RESOURCE_GROUP}'
        -
          macro: '{$REGION}'
    -
      uuid: 1cce07a8e3ab40d6b02c3a5e35086975
      template: 'Template - Azure Databases'
      name: 'Template - Azure Databases'
      description: 'Azure SQL Template'
      groups:
        -
          name: Templates
        -
          name: Templates/Azure
      discovery_rules:
        -
          uuid: 2a92deabd79e4d069642b328a9d66f85
          name: 'Azure Databases Discovery'
          type: EXTERNAL
          key: 'az_discovery.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}","--database","{HOST.HOST},{$AZURE_RESOURCE_GROUP}"]'
          delay: 1h
          description: 'Discovers all databases inside a SQL instance.'
          item_prototypes:
            -
              uuid: f6a3936731114c6b805976cb11377b88
              name: 'DB Failed Connections [ {#AZ_DATABASE_NAME} ]'
              type: EXTERNAL
              key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST}/databases/{#AZ_DATABASE_NAME},{$AZURE_RESOURCE_GROUP},SQL,connection_failed,total"]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              description: 'Number of failed connections'
              tags:
                -
                  tag: Application
                  value: 'Azure SQL Database'
            -
              uuid: b31b631f60294a64bc55a7db2ed882f7
              name: 'DB Sucessful Connections [ {#AZ_DATABASE_NAME} ]'
              type: EXTERNAL
              key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST}/databases/{#AZ_DATABASE_NAME},{$AZURE_RESOURCE_GROUP},SQL,connection_successful,total"]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              description: 'Number of sucessful connections'
              tags:
                -
                  tag: Application
                  value: 'Azure SQL Database'
            -
              uuid: efe5e4ed6e154a768e21efa5d2b607a5
              name: 'DB CPU Percentage [ {#AZ_DATABASE_NAME} ]'
              type: EXTERNAL
              key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST}/databases/{#AZ_DATABASE_NAME},{$AZURE_RESOURCE_GROUP},SQL,cpu_percent,average"]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              units: '%'
              description: 'CPU Consumption in percent'
              tags:
                -
                  tag: Application
                  value: 'Azure SQL Database'
            -
              uuid: 852c690fda114169b22f7d7dad1e7931
              name: 'DB Deadlocks [ {#AZ_DATABASE_NAME} ]'
              type: EXTERNAL
              key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST}/databases/{#AZ_DATABASE_NAME},{$AZURE_RESOURCE_GROUP},SQL,deadlock,total"]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              description: 'Number of deadlocks'
              tags:
                -
                  tag: Application
                  value: 'Azure SQL Database'
            -
              uuid: 1288e0545fa243ccbd94e1290cbf3ffe
              name: 'DB DataI/O [ {#AZ_DATABASE_NAME} ]'
              type: EXTERNAL
              key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST}/databases/{#AZ_DATABASE_NAME},{$AZURE_RESOURCE_GROUP},SQL,physical_data_read_percent,average"]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              units: '%'
              description: 'Data I/O used by this Database'
              tags:
                -
                  tag: Application
                  value: 'Azure SQL Database'
            -
              uuid: 488b1c47d18549f981ce80724e67b923
              name: 'DB Sessions [ {#AZ_DATABASE_NAME} ]'
              type: EXTERNAL
              key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST}/databases/{#AZ_DATABASE_NAME},{$AZURE_RESOURCE_GROUP},SQL,sessions_percent,average"]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              units: '%'
              description: 'Percentage of sessions required by this database on SQL Instance'
              tags:
                -
                  tag: Application
                  value: 'Azure SQL Database'
            -
              uuid: d3290798960b444a9917c345acdb9f92
              name: 'DB Data Space (bytes) [ {#AZ_DATABASE_NAME} ]'
              type: EXTERNAL
              key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST}/databases/{#AZ_DATABASE_NAME},{$AZURE_RESOURCE_GROUP},SQL,storage,average"]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              units: b
              description: 'Data space'
              tags:
                -
                  tag: Application
                  value: 'Azure SQL Database'
            -
              uuid: 1d9e75c2a1c04b408e9f39d086be9122
              name: 'DB Data Space (percent) [ {#AZ_DATABASE_NAME} ]'
              type: EXTERNAL
              key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST}/databases/{#AZ_DATABASE_NAME},{$AZURE_RESOURCE_GROUP},SQL,storage_percent,average"]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              units: '%'
              description: 'Data space'
              tags:
                -
                  tag: Application
                  value: 'Azure SQL Database'
          lld_macro_paths:
            -
              lld_macro: '{#ELB_TARGET}'
              path: $.data
      macros:
        -
          macro: '{$AZURE_APP_ID}'
        -
          macro: '{$AZURE_APP_PASSWORD}'
        -
          macro: '{$AZURE_RESOURCE_GROUP}'
        -
          macro: '{$AZURE_SUBSCRIPTION_ID}'
        -
          macro: '{$AZURE_TENANT_ID}'
        -
          macro: '{$REGION}'
    -
      uuid: 7c80121ef0264fa89e7cf22f80beafde
      template: 'Template - Azure DataFactory'
      name: 'Template - Azure DataFactory'
      description: 'Azure DataFactory Template'
      groups:
        -
          name: Templates
        -
          name: Templates/Azure
      items:
        -
          uuid: bfbf861940d4436b94b8d76a562f8336
          name: 'DataFactory Activities failed'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},ADF,ActivityFailedRuns,total"]'
          delay: 3h
          history: 7d
          value_type: FLOAT
          units: b
          description: |
            Failed Activity Runs
            
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure DataFactory'
        -
          uuid: 68d30082b7b7409883037f0bf62bf1aa
          name: 'DataFactory Activities succeed'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},ADF,ActivitySucceededRuns,total"]'
          delay: 3h
          history: 7d
          value_type: FLOAT
          units: b
          description: |
            Succeeded activity runs 
            
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure DataFactory'
        -
          uuid: 362d42b4db714bc08a888eadb882d924
          name: 'DataFactory IR runtime available memory'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},ADF,IntegrationRuntimeAvailableMemory,average"]'
          delay: 3h
          history: 7d
          value_type: FLOAT
          units: b
          description: |
            Integration runtime available memory, in bytes
            
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure DataFactory'
        -
          uuid: a7de211e73924751a025bd73c263086a
          name: 'DataFactory IR runtime queue duration'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},ADF,IntegrationRuntimeAverageTaskPickupDelay,average"]'
          delay: 3h
          history: 7d
          value_type: FLOAT
          units: s
          description: |
            Integration runtime queue duration, in seconds
            
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure DataFactory'
        -
          uuid: d048417c53e049a79efaf541362e633b
          name: 'DataFactory IR runtime CPU utilization'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},ADF,IntegrationRuntimeCpuPercentage,average"]'
          delay: 3h
          history: 7d
          value_type: FLOAT
          units: '%'
          description: |
            Integration runtime CPU utilization
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure DataFactory'
        -
          uuid: bb301f4416134bc6b775cd50d471b8ed
          name: 'DataFactory IR queue lenght'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},ADF,IntegrationRuntimeQueueLength,total"]'
          delay: 1h
          history: 7d
          value_type: FLOAT
          description: |
            Integration runtime queue
            
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure DataFactory'
        -
          uuid: 8781418aa3d340a8825635c8c93007fc
          name: 'DataFactory Failed activity runs metrics'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},ADF,PipelineFailedRuns,total"]'
          delay: 6h
          history: 7d
          value_type: FLOAT
          description: 'Number of Failed pipeline runs'
          tags:
            -
              tag: Application
              value: 'Azure DataFactory'
        -
          uuid: e705249499404c35be3bad99029f9c7c
          name: 'DataFactory Succeeded pipeline runs'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},ADF,PipelineSucceededRuns,total"]'
          delay: 6h
          history: 7d
          value_type: FLOAT
          description: 'Number of succeeded pipeline runs metrics'
          tags:
            -
              tag: Application
              value: 'Azure DataFactory'
      macros:
        -
          macro: '{$AZURE_RESOURCE_GROUP}'
        -
          macro: '{$REGION}'
    -
      uuid: acfb75cf80a9454a9a9372e1aa1573cf
      template: 'Template - Azure VM'
      name: 'Template - Azure VM'
      description: 'Azure Virtual Macines metrics'
      groups:
        -
          name: Templates
        -
          name: Templates/Azure
      items:
        -
          uuid: 56accb92beec4a6ca3c8b407e84d4c9a
          name: 'VM Available Memory'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},VM,Available Memory Bytes,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: b
          description: |
            Memory Usage 
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure Virtual Machines'
        -
          uuid: 9d284aa3f05c47f1b3f3a84a9a40a487
          name: 'VM CPU Credits Consumed'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},VM,CPU Credits Consumed,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: |
            CPU Credits consumed, when applicable in VM
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure Virtual Machines'
        -
          uuid: 7ecc4422fc0640878d0538e2ce7b13e5
          name: 'VM CPU Credits Remaining'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},VM,CPU Credits Remaining,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          description: |
            CPU Credits, when applicable in VM
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure Virtual Machines'
        -
          uuid: ba5d9e9703154abdadb70210d4eb7fe6
          name: 'VM Disk Read Usage (bytes)'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},VM,Disk Read Bytes,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: b
          description: |
            Disk Usage by cluster (mean)
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure Virtual Machines'
        -
          uuid: 39629141d87f4472a0da62d9fd17da78
          name: 'VM Disk Read Operations/Sec'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},VM,Disk Read Operations/Sec,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: ops/sec
          tags:
            -
              tag: Application
              value: 'Azure Virtual Machines'
        -
          uuid: 16bd791c7f404b54a12f18afadb6c559
          name: 'VM Disk Write Usage (bytes)'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},VM,Disk Write Bytes,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: b
          description: |
            Disk Usage by cluster (mean)
            
            https://docs.microsoft.com/pt-br/azure/azure-monitor/essentials/metrics-supported
          tags:
            -
              tag: Application
              value: 'Azure Virtual Machines'
        -
          uuid: 5da4280205eb45e0bbe190a6f86db8ee
          name: 'VM Disk Write Operations/Sec'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},VM,Disk Write Operations/Sec,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: ops/sec
          tags:
            -
              tag: Application
              value: 'Azure Virtual Machines'
        -
          uuid: e05397a24e00426b873fb574eebd726d
          name: 'VM Network In'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},VM,Network In Total,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: bps
          description: 'Total Nework In'
          tags:
            -
              tag: Application
              value: 'Azure Virtual Machines'
        -
          uuid: b6f568ffc3504976ae02eedc65e0ab16
          name: 'VM Network Out'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},VM,Network Out Total,total"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: bps
          description: 'Total Nework Out'
          tags:
            -
              tag: Application
              value: 'Azure Virtual Machines'
        -
          uuid: e81b216cd1014c13a8af6cf3d1871993
          name: 'VM CPU Utilization'
          type: EXTERNAL
          key: 'az_getmonitormetrics.py["-C","{$AZURE_TENANT_ID},{$AZURE_APP_ID},{$AZURE_APP_PASSWORD},{$AZURE_SUBSCRIPTION_ID}", "-m", "{HOST.HOST},{$AZURE_RESOURCE_GROUP},VM,Percentage CPU,average"]'
          delay: 5m
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'CPU Usage in Percent'
          tags:
            -
              tag: Application
              value: 'Azure Virtual Machines'
      macros:
        -
          macro: '{$AZURE_APP_ID}'
        -
          macro: '{$AZURE_APP_PASSWORD}'
        -
          macro: '{$AZURE_RESOURCE_GROUP}'
        -
          macro: '{$AZURE_SUBSCRIPTION_ID}'
        -
          macro: '{$AZURE_TENANT_ID}'
